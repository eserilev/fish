const { 
    IronfishSdk,
} = require('@ironfish/sdk');

async function main() {
    const sdk = await IronfishSdk.init();

    const client = await sdk.connectRpc();

    const transaction = "0201000000000000000100000000000000a87bfe9580057781d6bd702432c0ce1a1eba32e01eabb9ad9d147b3ac28892321051f33a2f14f92735e562dc658a5639279ddca3d5079a6d1242b2a588a9cbf44c0094357700000000f2c4bb24301260069c8d3c1f71efcf4763e6c384ec5a617aa352528441f9340c00000000000000000000000000000000000000000000000000000000000000007bfe9580057781d6bd702432c0ce1a1eba32e01eabb9ad9d147b3ac288923210a6030000000000002090984b3339fe2ba9be695243b4502894bc52b410a18dfe096a3757fcf6530e62200000000000000000206c942326f53fe9500c04942794953d303ba0586ecebdad424acfbce689cf266e0020dbf681b78f35f6e18652f90be11ed7a08f5b4ac7f9ed9b0610a8ee9c7d681e4901204d18ff598883a9b346871a0f165351ec3ac16b921560ab234037a43ca021611b002013921b6d776141631272afcde9abd20bab942e6b0b82656f560af6d9553bed6200201e9091c816b5a64f3d8127df19ed983de5faf9ca3fe8cb61b9dfaadbc966155f0020d68d10f888de82885a679084655cc0f2b923af5c4e8b1f496768c588acd745710020c4e91cbf36f5b726c6fb155f645931eb4d33e17802d26ddad30fd1fb6f43cc0b002053f308e81dbbb173008b78b95acfb65eba9238d55f95e9fcd8c41404171e392b002046849a11dc5b069dcd5948b0ff0c67ec82e70ebd4903f78fcc3f1a8af609571d0020eaa405b906f18539e43d69eee973c17f5f301b12e9f3ecdf786aecea861c356c0020420c96eee788985f830a5fa46c4da2414c5541ed41190f9543659c0453204373002050c43b3249ff2cad3778a5a5a7edc53ee60a40a2166aee07cff397b95ca25f080020600cb69eeddf3c1668a79f771fd218612b90d98c99b82ae09f249740091a613b0020cd0b2e392aa0031a8cf100db69d15d00416e95d783a344fcaa0de61b643fb3600020e7887c9cc1a8daabdd187e7e372fcffe68c90810ac4f382d08bb0669f2069b510020935e1ddecc92b68f6f34a4e15ba6f9abc66cdb8cd8638eb0948f8bfb5bab40510020994644a55af3bf7e7a0ef57e9eff365e0782e3d03e4fd3b4d942e798e655f50b0020b1738d0abe1460f4717a12f38c73c8aa4e3a783558badaa26e5a5c57202ca55f0020cee0e2c33e3f2a2f11a2770f94e5678c8b32bab3d7e72c7f8f079f235e64bd3700201dde93398ddb13094168f80034623e7f489f7edc281df85856fd5f41bf72fa250020ad8125f784581dcd51a8fa2d372d90e3de3ea08f9e166cb515b7557660aab10e0020fd0fd3fdfd79c334887437c6ae98f21e4c670c116b1a2a5ec0fd7c9553e4d52f0020a0235dcd0532d76a698e66075d3ae4bdcdf646d0e8983fca422b46c92b4116330020dac6a8936b898215eaa3c784a0cfe978f7465848a1ef7f76e585cc05517a042f00205f8c07b1f2c21bf79430f1b1cccb88d73319c11d1a95e1f25f2223175a462135002058fc513854f3f8cc958995e275f77d9819958e3657740eeb6f7e9bf7ca2e01130020dcfbe2f1465d3fff4c455ec7462c723bd41afda59be50cf924de2d76c2bb9d5d00203c8ce57ac3e884e332856767106c107fc84675bd8d43a17e6b7805be1b5ac85500203092f2d058b4222a3d4ef24b4434249169bc14cee71d42d305acfd479f4a8a0e0020c84b24ef0e539b7e54d3a73d81adf347584a873fca4ba9039114ce1d5bcb1d4700200da3cc94bf1b31433c41aee2d3cdb2e9e960da66a3775dfc20272c97fe6756150020ede8870d377525e3dfe4ea76361bd37270c5c0f19d668964ae28e7410f27746a0100000000000000a88aeeb2a7cbf0b35a1f02ae826a26e225df67113c4721a2c049721173d9a25c7051f33a2f14f92735e562dc658a5639279ddca3d5079a6d1242b2a588a9cbf44c0100000000000000f7ced0def3be0f3bc6a88a765e4e795db800db9289bf899817cb7cb32ac8020931000000000000000000000000000000000000000000000000000000000000007bfe9580057781d6bd702432c0ce1a1eba32e01eabb9ad9d147b3ac2889232100000000000000000000000000000000001b3030000"
    
    const tx_request = {
        transaction: transaction,
        broadcast: true
    }

    const account = {
        account: {
            version: 2,
            name: "default",
            viewKey: "aeaa9d07469b8274f818d68acf2f67bd0e68eaeee1d051fa357b7ffc981cbf31f688380948af3e310981825917ff871d1b1b567230045024a8c56cfa0df6d52d",
            incomingViewKey: "6c61df2a84f35aaf8155c8ab7e279d01a9c7cb1764af5cbd93855ace3fa1bf01",
            outgoingViewKey: "6f3b52602f70e162e37c644a27a7cdee0c4c74441c68221bd9925f9cf46e2ed6",
            publicAddress: "7bfe9580057781d6bd702432c0ce1a1eba32e01eabb9ad9d147b3ac288923210",
            spendingKey: "4636eafe6fedc00b4841bab13ab68a5266109edcfad16e06063748ebdb06909d",
        }
    }

    await client.wallet.importAccount(account);

    const signed_tx = await client.wallet.postTransaction(tx_request);

    console.log(signed_tx);

    await client.wallet.removeAccount({ account: "default" });
}

main();